"use strict";(self.webpackChunkimio_smartweb_core_webcomponents=self.webpackChunkimio_smartweb_core_webcomponents||[]).push([[472],{5472:function(e,t,n){n.r(t),n.d(t,{default:function(){return Q}});var r=n(8709),a=n(2707),l=n(5110),o=n(804);function c(){return c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(this,arguments)}var i=function(e){return r.createElement(o.ZP,c({speed:2,viewBox:"0 0 710.04 150",backgroundColor:"#f3f3f3",foregroundColor:"#ecebeb",className:"skeleton"},e),r.createElement("rect",{className:"cls-1",width:"246",height:"150"}),r.createElement("rect",{className:"cls-1",x:"275.74",width:"225.04",height:"18.87"}),r.createElement("rect",{className:"cls-1",x:"275.74",y:"47.43",width:"434.3",height:"10.19"}),r.createElement("rect",{className:"cls-1",x:"275.74",y:"78.06",width:"434.3",height:"10.19"}))};function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],o=!0,c=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);o=!0);}catch(e){c=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(c)throw a}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var f=function(e){var t=e.contactArray,n=e.onChange,a=(0,l.k6)(),o=(0,l.UO)().id,c=u((0,r.useState)({}),2),i=c[0],s=c[1];return(0,r.useEffect)((function(){if(t.length>0){var e=t.filter((function(e){return e.UID===o}));s(e[0])}}),[o,t]),r.createElement("div",{className:"contact-content"},r.createElement("button",{type:"button",onClick:function(){a.push("."),n(null)}},"Go home"),r.createElement("div",{className:"contactCard"},r.createElement("div",{className:"contactText"},r.createElement("div",{className:"contactTextTitle"},r.createElement("span",{className:"title"},i.title)),r.createElement("div",{className:"contactTextAll"},i.category?r.createElement("span",null,i.category):"",r.createElement("div",{className:"adresse"},i.number?r.createElement("span",null,i.number+" "):"",i.street?r.createElement("span",null,i.street+", "):"",i.complement?r.createElement("span",null,i.complement+", "):"",i.zipcode?r.createElement("span",null,i.zipcode+" "):"",i.city?r.createElement("span",null,i.city):""),r.createElement("div",{className:"itineraty"},i.street?r.createElement("a",{href:"https://www.google.com/maps/dir/?api=1&destination="+i.street+"+"+i.number+"+"+i.complement+"+"+i.zipcode+"+"+i.city+"+"+i.country},"Itinéraire"):""),r.createElement("div",{className:"phones"},i.phones?i.phones.map((function(e){return r.createElement("span",null,e.number)})):""),r.createElement("div",{className:"mails"},i.mails?i.mails.map((function(e){return r.createElement("span",null,e.mail_address)})):""),r.createElement("div",{className:"topics"},i.topics?i.topics.map((function(e){return r.createElement("span",null,e.title)})):"")))))},m=n.p+"assets/img-placeholder-bla.a2b8b384c46ce56c99f042dc4625d309.png",p=function(e){var t=e.contactItem,n=t.title&&t.title,a=t.taxonomy_contact_category?t.taxonomy_contact_category[0].title:"",l=t.number?t.number:"",o=t.street?t.street:"",c=t.complement?t.complement:"",i=t.zipcode?t.zipcode:"",u=t.city?t.city:"",s=t.country?t.country:"",f=t.phones?t.phones:"",p=t.mails?t.mails:"",y=t.topics?t.topics:"";return r.createElement("div",{className:"r-list-item"},r.createElement("div",{className:"r-item-img",style:{backgroundImage:t.image?"url("+t.image.scales.preview.download+")":"url("+m+")"}}),r.createElement("div",{className:"r-item-text"},r.createElement("span",{className:"r-item-title"},n),a?r.createElement("span",{className:"r-item-categorie"},a):"",r.createElement("div",{className:"r-item-all"},r.createElement("div",{className:"r-item-adresse"},l?r.createElement("span",null,l+" "):"",o?r.createElement("span",null,o+", "):"",c?r.createElement("span",null,c+", "):"",r.createElement("br",null),i?r.createElement("span",null,i+" "):"",u?r.createElement("span",null,u):"",r.createElement("div",{className:"itineraty"},o?r.createElement("a",{href:"https://www.google.com/maps/dir/?api=1&destination="+o+"+"+l+"+"+c+"+"+i+"+"+u+"+"+s},"Itinéraire"):"")),r.createElement("div",{className:"r-item-contact"},r.createElement("div",{className:"phones"},f?f.map((function(e){return r.createElement("span",null,e.number)})):""),r.createElement("div",{className:"mails"},p?p.map((function(e){return r.createElement("span",null,e.mail_address)})):""),r.createElement("div",{className:"topics"},y?y.map((function(e){return r.createElement("span",null,e.title)})):"")))))},y=function(e){var t=e.contactArray,n=e.onChange,l=e.onHover;function o(e){l(e)}return r.createElement("ul",{className:"r-result-list annuaire-result-list"},t.map((function(e,t){return r.createElement("li",{className:"r-list-item-group",onMouseEnter:function(){return o(e.UID)},onMouseLeave:function(){return o(null)},onClick:function(){return t=e.UID,void n(t);var t}},r.createElement(a.rU,{className:"r-list-item-link",style:{textDecoration:"none"},to:{pathname:"".concat(e.UID),state:{idItem:e.UID}}}),r.createElement(p,{contactItem:e,key:e.created}))})))},d=n(8458),v=n(5108),h=n(6683),b=n(2948),g=n(8818),E=n.n(g);var A=n.p+"assets/location-bla.1423bcce16ddcb21141430cac1428dc1.svg";var w=n.p+"assets/location-active-bla.fe8acf1aaf227a942ff7feed87fa2d22.svg";function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],o=!0,c=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);o=!0);}catch(e){c=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(c)throw a}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return I(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return I(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function N(e){var t=e.activeItem,n=e.arrayOfLatLngs,r=(0,d.Sx)();if(t){var a=[];a.push(t.geolocation.latitude),a.push(t.geolocation.longitude),r.setView(a,15)}else{var l=new(E().LatLngBounds)(n);r.fitBounds(l)}return null}var C=function(e){var t=S((0,r.useState)(null),2),n=t[0],a=t[1],l=S((0,r.useState)(null),2),o=(l[0],l[1]),c=S((0,r.useState)(null),2),i=c[0],u=c[1],s=S((0,r.useState)(null),2),f=s[0],m=s[1];function p(e){return new(E().Icon)({iconUrl:e,iconSize:[29,37]})}(0,r.useEffect)((function(){var t=e.items.filter((function(e){return e.is_geolocated}));u(t)}),[e]);var y=function(t){return t===e.clickId||t===e.hoverId?999:1};return(0,r.useEffect)((function(){if(null!==e.clickId){var t=i&&i.filter((function(t){return t.UID===e.clickId}));a(t[0])}else a(null)}),[e.clickId]),(0,r.useEffect)((function(){if(e.hoverId){var t=i&&i.filter((function(t){return t.UID===e.hoverId}));o(t[0])}else o(null)}),[e.hoverId]),(0,r.useEffect)((function(){if(i&&i.length>0){var e=[];i.map((function(t,n){var r=t.geolocation.latitude,a=t.geolocation.longitude;e.push([r,a])})),m(e)}}),[e]),r.createElement("div",{className:"r-map annuaire-map"},r.createElement(v.h,{center:[50.85034,4.35171],zoom:15},r.createElement(h.I,{attribution:'© <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),null!=f&&r.createElement(N,{activeItem:n,arrayOfLatLngs:f}),i&&i.map((function(t,n){return r.createElement(b.J,{key:t.UID,icon:(l=t.UID,l===e.clickId||l===e.hoverId?p(w):p(A)),zIndexOffset:y(t.UID),position:[t.geolocation?t.geolocation.latitude:"",t.geolocation?t.geolocation.longitude:""],onClick:function(){a(t)}});var l})),";"))},x=n(7749);function j(e){return function(e){if(Array.isArray(e))return O(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||k(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],o=!0,c=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);o=!0);}catch(e){c=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(c)throw a}}return l}(e,t)||k(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){if(e){if("string"==typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?O(e,t):void 0}}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var _=function(e){var t=U((0,r.useState)([]),2),n=t[0],a=t[1];(0,r.useEffect)((function(){if(e.contactArray.length>0){var t=[];e.contactArray.map((function(e,n){null!=e.taxonomy_contact_category&&t.push(e.taxonomy_contact_category[0].title)}));var n=j(new Set(t)).map((function(e){return{value:e,label:e}}));a(n)}}),[e.contactArray]);return r.createElement("div",{className:"r-filter categories-Filter"},r.createElement("span",null,"Catégories"),r.createElement(x.ZP,{className:"select-custom-class library-categories",isClearable:!0,onChange:function(t){e.onChange(t)},options:n,placeholder:"Toutes"}))};function T(e){return function(e){if(Array.isArray(e))return M(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||D(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],o=!0,c=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);o=!0);}catch(e){c=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(c)throw a}}return l}(e,t)||D(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,t){if(e){if("string"==typeof e)return M(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?M(e,t):void 0}}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var z=function(e){var t=L((0,r.useState)([]),2),n=t[0],a=t[1];return(0,r.useEffect)((function(){if(e.contactArray.length>0){var t=[];e.contactArray.map((function(e,n){null!=e.topics&&t.push(e.topics[0].title)}));var n=T(new Set(t)).map((function(e){return{value:e,label:e}}));a(n)}}),[e.contactArray]),r.createElement("div",{className:"r-filter topics-Filter"},r.createElement("span",null,"Thématiques"),r.createElement(x.ZP,{className:"select-custom-class library-topics",isClearable:!0,onChange:function(t){e.onChange(t)},options:n,placeholder:"Toutes"}))};function P(e){return function(e){if(Array.isArray(e))return B(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||R(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],o=!0,c=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);o=!0);}catch(e){c=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(c)throw a}}return l}(e,t)||R(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){if(e){if("string"==typeof e)return B(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?B(e,t):void 0}}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var F=function(e){var t=$((0,r.useState)([]),2),n=t[0],a=t[1];return(0,r.useEffect)((function(){if(e.contactArray.length>0){var t=[];e.contactArray.map((function(e,n){null!=e.facilities&&t.push(e.facilities[0].title)}));var n=P(new Set(t)).map((function(e){return{value:e,label:e}}));a(n)}}),[e.contactArray]),r.createElement("div",{className:"r-filter facilities-Filter"},r.createElement("span",null,"Facilité"),r.createElement(x.ZP,{className:"select-custom-class library-facilities",isClearable:!0,onChange:function(t){e.onChange(t)},options:n,placeholder:"Toutes"}))},Z=n(1806),q=n.n(Z);function H(e,t,n,r,a,l,o){try{var c=e[l](o),i=c.value}catch(e){return void n(e)}c.done?t(i):Promise.resolve(i).then(r,a)}function W(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],o=!0,c=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);o=!0);}catch(e){c=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(c)throw a}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return G(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return G(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var J=function(e){var t=W((0,r.useState)(null),2),n=t[0],a=t[1],l=W((0,r.useState)(""),2),o=l[0],c=l[1],i=W((0,r.useState)(!0),2),u=i[0],s=i[1],f=function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),e.prev=1,e.next=4,q().request(t);case 4:n=e.sent,a(n.data),c(null),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),c(e.t0);case 12:return e.prev=12,s(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[1,9,12,15]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var l=e.apply(t,n);function o(e){H(l,r,a,o,c,"next",e)}function c(e){H(l,r,a,o,c,"throw",e)}o(void 0)}))});return function(e){return t.apply(this,arguments)}}();return(0,r.useEffect)((function(){f(e)}),[e.params]),{response:n,error:o,isLoading:u}};function V(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,l=[],o=!0,c=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);o=!0);}catch(e){c=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(c)throw a}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return K(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return K(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Q=function(e){var t=V((0,r.useState)([]),2),n=t[0],o=t[1],c=V((0,r.useState)(""),2),u=c[0],s=(c[1],V((0,r.useState)([]),2)),m=s[0],p=s[1],d=V((0,r.useState)(null),2),v=d[0],h=d[1],b=V((0,r.useState)(null),2),g=b[0],E=b[1],A=V((0,r.useState)({}),2),w=A[0],S=(A[1],(0,r.useRef)(null),V((0,r.useState)(null),2)),I=S[0],N=S[1],x=J({method:"get",url:"",baseURL:"https://annuaire.preprod.imio.be/braine-l-alleud/@search?fullobjects=1",headers:{Accept:"application/json"},params:w}),j=x.response,U=(x.error,x.isLoading);(0,r.useEffect)((function(){null!==j&&o(j.items)}),[j]);var k=function(e){h(e)};(0,r.useEffect)((function(){p(n.filter((function(e){return e.title.toLowerCase().includes(u.toLowerCase())})))}),[u,n]);return r.createElement("div",{className:"ref",ref:function(e){e&&N(e.getBoundingClientRect().top)},style:{height:"calc(100vh -  ".concat(I,"px)")}},r.createElement("h1",null,e.queryUrl),r.createElement(a.UT,null,r.createElement("div",{className:"r-wrapper r-annuaire-wrapper"},r.createElement("div",{className:"r-result r-annuaire-result"},r.createElement(l.rs,null,r.createElement(l.AW,{path:"/:id"},r.createElement(f,{onChange:k,contactArray:n})),r.createElement(l.AW,{exact:!0,path:"*"},r.createElement("div",{className:"r-result-filter annuaire-result-filter"},r.createElement(z,{onChange:function(e){if(null===e)p(n);else{var t=n.filter((function(e){return null!=e.topics}));p(t.filter((function(t){return t.topics[0].title.includes(e.value)})))}},contactArray:n}),r.createElement(_,{onChange:function(e){if(null===e)p(n);else{var t=n.filter((function(e){return null!=e.taxonomy_contact_category}));p(t.filter((function(t){return t.taxonomy_contact_category[0].title.includes(e.value)})))}},contactArray:n}),r.createElement(F,{onChange:function(e){if(null===e)p(n);else{var t=n.filter((function(e){return null!=e.facilities}));p(t.filter((function(t){return t.facilities[0].title.includes(e.value)})))}},contactArray:n})),U?r.createElement("div",null,r.createElement(i,null)," ",r.createElement(i,null)," ",r.createElement(i,null)):r.createElement(y,{onChange:k,onHover:function(e){E(e)},contactArray:m})))),r.createElement("div",{style:{maxHeight:"500px"}},r.createElement(C,{clickId:v,hoverId:g,items:m})))))}}}]);