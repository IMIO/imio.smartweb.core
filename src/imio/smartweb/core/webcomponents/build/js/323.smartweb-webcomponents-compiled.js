"use strict";(self.webpackChunkimio_smartweb_core_webcomponents=self.webpackChunkimio_smartweb_core_webcomponents||[]).push([[323],{73323:function(e,r,t){t.r(r),t.d(r,{default:function(){return L}});var a=t(78709),n=t(12707),l=t(33829),c=t(51031),i=t(10708),u=t(93580);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}var s=["SearchableText"],m=["SearchableText"];function f(e,r){if(null==e)return{};var t,a,n=function(e,r){if(null==e)return{};var t,a,n={},l=Object.keys(e);for(a=0;a<l.length;a++)t=l[a],r.indexOf(t)>=0||(n[t]=e[t]);return n}(e,r);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)t=l[a],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(n[t]=e[t])}return n}function h(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,a)}return t}function p(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?h(Object(t),!0).forEach((function(r){y(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):h(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function y(e,r,t){return(r=b(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function b(e){var r=function(e,r){if("object"!==o(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var a=t.call(e,r||"default");if("object"!==o(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"===o(r)?r:String(r)}function v(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var a,n,l,c,i=[],u=!0,o=!1;try{if(l=(t=t.call(e)).next,0===r){if(Object(t)!==t)return;u=!1}else for(;!(u=(a=l.call(t)).done)&&(i.push(a.value),i.length!==r);u=!0);}catch(e){o=!0,n=e}finally{try{if(!u&&null!=t.return&&(c=t.return(),Object(c)!==c))return}finally{if(o)throw n}}return i}}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return g(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return g(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,a=new Array(r);t<r;t++)a[t]=e[t];return a}var d=function(e){var r=(0,c.k6)(),n=t(31296),o=v((0,a.useState)(e.activeFilter),2),h=o[0],g=o[1],d=v((0,a.useState)({}),2),E=d[0],S=d[1],N=v((0,a.useState)(null),2),O=N[0],j=N[1],x=v((0,a.useState)(null),2),w=x[0],A=x[1];(0,a.useEffect)((function(){var r,t;r=i.Z.request({method:"get",url:"",baseURL:e.url+"/@vocabularies/imio.smartweb.vocabulary.Topics",headers:{Accept:"application/json"}}),t=i.Z.request({method:"get",url:"",baseURL:e.url+"/@vocabularies/imio.smartweb.vocabulary.IAm",headers:{Accept:"application/json"}}),i.Z.all([r,t]).then(i.Z.spread((function(){var e=arguments.length<=0?void 0:arguments[0],r=arguments.length<=1?void 0:arguments[1];if(null!==e){var t=e.data.items.map((function(e){return{value:e.token,label:e.title}}));j(t)}if(null!==r){var a=r.data.items.map((function(e){return{value:e.token,label:e.title}}));A(a)}}))).catch((function(e){console.error("errors")}))}),[]);var P=function(e){S({SearchableText:e.target.value}),e.target.value?g((function(r){return p(p({},r),{},{SearchableText:e.target.value})}),[]):g((function(e){var r=p({},e);r.SearchableText;return f(r,s)}))},T=(0,a.useCallback)((function(e,r){var t=r.name;e?g((function(r){return p(p({},r),{},y({},t,e.value))}),[]):g((function(e){var r=p({},e);r[t];return f(r,[t].map(b))}))})),I=(0,a.useRef)(!0);(0,a.useEffect)((function(){I.current?I.current=!1:(r.push({pathname:"./",search:n.stringify(h)}),e.onChange(h))}),[h]);var C=O&&O.filter((function(r){return r.value===e.activeFilter.topics})),_=w&&w.filter((function(r){return r.value===e.activeFilter.iam})),U={control:function(e){return p(p({},e),{},{backgroundColor:"white",borderRadius:"0",height:"50px"})},placeholder:function(e){return p(p({},e),{},{color:"000",fontWeight:"bold",fontSize:"12px",textTransform:"uppercase",letterSpacing:"1.2px"})},option:function(e,r){r.data,r.isDisabled,r.isFocused,r.isSelected;return p({},e)}};return a.createElement(a.Fragment,null,a.createElement("div",{className:"col-md-6 py-1 r-search search-bar-filter"},a.createElement("form",{onSubmit:function(e){e.preventDefault(),E.SearchableText?g((function(e){return p(p({},e),{},{SearchableText:E.SearchableText})}),[]):g((function(e){var r=p({},e);r.SearchableText;return f(r,m)}))}},a.createElement("label",null,a.createElement(u.$H,null,(function(e){var r=e.translate;return a.createElement("input",{name:"SearchableText",type:"text",onChange:P,value:E.SearchableText,placeholder:r({text:"Recherche"})})}))),a.createElement("button",{type:"submit"}))),a.createElement("div",{className:"col-md-3 col-lg-2 py-1 r-search search-select-filter"},a.createElement(u.$H,null,(function(e){var r=e.translate;return a.createElement(l.ZP,{styles:U,name:"iam",className:"r-search-select",isClearable:!0,onChange:T,options:w&&w,placeholder:r({text:"Je suis"}),value:_&&_[0]})}))),a.createElement("div",{className:"col-md-3 col-lg-2 py-1 r-search search-select-filter"},a.createElement(u.$H,null,(function(e){var r=e.translate;return a.createElement(l.ZP,{styles:U,name:"topics",className:"r-search-select",isClearable:!0,onChange:T,options:O&&O,placeholder:r({text:"Thématiques"}),value:C&&C[0]})}))))},E=t(14844),S=t(30144),N=t.n(S);function O(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var a,n,l,c,i=[],u=!0,o=!1;try{if(l=(t=t.call(e)).next,0===r){if(Object(t)!==t)return;u=!1}else for(;!(u=(a=l.call(t)).done)&&(i.push(a.value),i.length!==r);u=!0);}catch(e){o=!0,n=e}finally{try{if(!u&&null!=t.return&&(c=t.return(),Object(c)!==c))return}finally{if(o)throw n}}return i}}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return j(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return j(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,a=new Array(r);t<r;t++)a[t]=e[t];return a}var x=function(e){var r=O((0,a.useState)([]),2),t=r[0],n=r[1],l=(0,E.Z)({method:"get",url:"",baseURL:e.url+"/@search?&_core=directory&b_size=100",headers:{Accept:"application/json"},params:e.urlParams.SearchableText||e.urlParams.iam||e.urlParams.topics?e.urlParams:{}},[e]),c=l.response;l.error,l.isLoading;return(0,a.useEffect)((function(){n(null!==c?c.items:[])}),[c]),a.createElement("div",{className:"search-contact"},a.createElement("div",{className:"r-search-header"},a.createElement("h2",{className:"r-search-header-title"},a.createElement(u.vN,{text:"Contacts"})),a.createElement("p",{className:"r-search-header-count"},t.length>0?a.createElement(a.Fragment,null," ",t.length," "," "," ",a.createElement(u.vN,{text:"Résultats"})," "):a.createElement(u.vN,{text:"Aucun résultat"}))),a.createElement("ul",{className:"r-search-list"},t.map((function(r,t){return a.createElement("li",{key:t,className:"r-search-item"},a.createElement("a",{href:r._url},a.createElement("div",{className:"r-search-img"},r.has_leadimage[0]?a.createElement("div",{className:"r-search-img",style:{backgroundImage:"url("+r.image_url+")"}}):a.createElement("div",{className:"r-search-img no-search-item-img"})),a.createElement(N(),{highlightClassName:"r-search-highlighter",searchWords:[e.urlParams.SearchableText],textToHighlight:r.title})))}))))};function w(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var a,n,l,c,i=[],u=!0,o=!1;try{if(l=(t=t.call(e)).next,0===r){if(Object(t)!==t)return;u=!1}else for(;!(u=(a=l.call(t)).done)&&(i.push(a.value),i.length!==r);u=!0);}catch(e){o=!0,n=e}finally{try{if(!u&&null!=t.return&&(c=t.return(),Object(c)!==c))return}finally{if(o)throw n}}return i}}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return A(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return A(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,a=new Array(r);t<r;t++)a[t]=e[t];return a}var P=function(e){var r=w((0,a.useState)([]),2),t=r[0],n=r[1],l=(0,E.Z)({method:"get",url:"",baseURL:e.url+"/@search?&_core=news&b_size=100",headers:{Accept:"application/json"},params:e.urlParams.SearchableText||e.urlParams.iam||e.urlParams.topics?e.urlParams:{}},[e]),c=l.response;l.error,l.isLoading;return(0,a.useEffect)((function(){n(null!==c?c.items:[])}),[c]),a.createElement("div",{className:"search-news"},a.createElement("div",{className:"r-search-header"},a.createElement("h2",{className:"r-search-header-title"},a.createElement(u.vN,{text:"Actualités"})),a.createElement("p",{className:"r-search-header-count"},t.length>0?a.createElement(a.Fragment,null," ",t.length," "," "," ",a.createElement(u.vN,{text:"Résultats"})," "):a.createElement(u.vN,{text:"Aucun résultat"}))),a.createElement("ul",{className:"r-search-list"},t.map((function(r,t){return a.createElement("li",{key:t,className:"r-search-item"},a.createElement("a",{href:r._url},a.createElement("div",{className:"r-search-img"},r.has_leadimage[0]?a.createElement("div",{className:"r-search-img",style:{backgroundImage:"url("+r.image_url+")"}}):a.createElement("div",{className:"r-search-img no-search-item-img"})),a.createElement(N(),{highlightClassName:"r-search-highlighter",searchWords:[e.urlParams.SearchableText],textToHighlight:r.title})))}))))};function T(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var a,n,l,c,i=[],u=!0,o=!1;try{if(l=(t=t.call(e)).next,0===r){if(Object(t)!==t)return;u=!1}else for(;!(u=(a=l.call(t)).done)&&(i.push(a.value),i.length!==r);u=!0);}catch(e){o=!0,n=e}finally{try{if(!u&&null!=t.return&&(c=t.return(),Object(c)!==c))return}finally{if(o)throw n}}return i}}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return I(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return I(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,a=new Array(r);t<r;t++)a[t]=e[t];return a}var C=function(e){var r=T((0,a.useState)([]),2),t=r[0],n=r[1],l=(0,E.Z)({method:"get",url:"",baseURL:e.url+"/@search?&_core=events&b_size=100",headers:{Accept:"application/json"},params:e.urlParams.SearchableText||e.urlParams.iam||e.urlParams.topics?e.urlParams:{}},[e]),c=l.response;l.error,l.isLoading;return(0,a.useEffect)((function(){n(null!==c?c.items:[])}),[c]),a.createElement("div",{className:"search-events"},a.createElement("div",{className:"r-search-header"},a.createElement("h2",{className:"r-search-header-title"},a.createElement(u.vN,{text:"Événements"})),a.createElement("p",{className:"r-search-header-count"},t.length>0?a.createElement(a.Fragment,null," ",t.length," "," "," ",a.createElement(u.vN,{text:"Résultats"})," "):a.createElement(u.vN,{text:"Aucun résultat"}))),a.createElement("ul",{className:"r-search-list"},t.map((function(r,t){return a.createElement("li",{key:t,className:"r-search-item"},a.createElement("a",{href:r._url},a.createElement("div",{className:"r-search-img"},r.has_leadimage[0]?a.createElement("div",{className:"r-search-img",style:{backgroundImage:"url("+r.image_url+")"}}):a.createElement("div",{className:"r-search-img no-search-item-img"})),a.createElement(N(),{highlightClassName:"r-search-highlighter",searchWords:[e.urlParams.SearchableText],textToHighlight:r.title})))}))))};function _(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var a,n,l,c,i=[],u=!0,o=!1;try{if(l=(t=t.call(e)).next,0===r){if(Object(t)!==t)return;u=!1}else for(;!(u=(a=l.call(t)).done)&&(i.push(a.value),i.length!==r);u=!0);}catch(e){o=!0,n=e}finally{try{if(!u&&null!=t.return&&(c=t.return(),Object(c)!==c))return}finally{if(o)throw n}}return i}}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return U(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return U(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,a=new Array(r);t<r;t++)a[t]=e[t];return a}var k=function(e){var r=_((0,a.useState)([]),2),t=r[0],n=r[1],l=(0,E.Z)({method:"get",url:"",baseURL:e.url+"/@search?&b_size=100",headers:{Accept:"application/json"},params:e.urlParams.SearchableText||e.urlParams.iam||e.urlParams.topics?e.urlParams:{}},[e]),c=l.response;l.error,l.isLoading;return(0,a.useEffect)((function(){n(null!==c?c.items:[])}),[c]),a.createElement("div",{className:"search-web"},a.createElement("div",{className:"r-search-header"},a.createElement("h2",{className:"r-search-header-title"},a.createElement(u.vN,{text:"Infos pratiques"})),a.createElement("p",{className:"r-search-header-count"},t.length>0?a.createElement(a.Fragment,null," ",t.length," "," "," ",a.createElement(u.vN,{text:"Résultats"})," "):a.createElement(u.vN,{text:"Aucun résultat"}))),a.createElement("ul",{className:"r-search-list"},t.map((function(r,t){return a.createElement("li",{key:t,className:"r-search-item"},a.createElement("a",{href:r["@id"]},a.createElement(N(),{highlightClassName:"r-search-highlighter",searchWords:[e.urlParams.SearchableText],textToHighlight:r.title})))}))))},q=t(6489),R=t(38401);function F(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var a,n,l,c,i=[],u=!0,o=!1;try{if(l=(t=t.call(e)).next,0===r){if(Object(t)!==t)return;u=!1}else for(;!(u=(a=l.call(t)).done)&&(i.push(a.value),i.length!==r);u=!0);}catch(e){o=!0,n=e}finally{try{if(!u&&null!=t.return&&(c=t.return(),Object(c)!==c))return}finally{if(o)throw n}}return i}}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return Z(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Z(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,a=new Array(r);t<r;t++)a[t]=e[t];return a}function L(e){return a.createElement(n.VK,null,a.createElement(u.zt,{language:e.currentLanguage,translation:R.Z},a.createElement($,{queryFilterUrl:e.queryFilterUrl,queryUrl:e.queryUrl,resultOption:JSON.parse(e.resultOption)})))}var $=function(e){var r=t(31296).parse((0,q.Z)().toString()),n={SearchableText:r.SearchableText,iam:r.iam,topics:r.topics},l=F((0,a.useState)(n),2),c=l[0],i=l[1],u=F((0,a.useState)(6),2);u[0],u[1];return a.createElement("div",{className:"ref"},a.createElement("div",{className:"r-search r-search-container"},a.createElement("div",{className:"row r-search-filters"},a.createElement(d,{url:e.queryUrl,activeFilter:c,onChange:function(e){i(e)}})),a.createElement("div",{className:"r-search-result"},a.createElement(k,{urlParams:c,url:e.queryUrl}),e.resultOption.news&&a.createElement(P,{urlParams:c,url:e.queryUrl}),e.resultOption.events&&a.createElement(C,{urlParams:c,url:e.queryUrl}),e.resultOption.directory&&a.createElement(x,{urlParams:c,url:e.queryUrl}))))}}}]);