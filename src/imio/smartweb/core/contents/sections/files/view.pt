<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      lang="en"
      metal:use-macro="context/@@main_template/macros/master"
      i18n:domain="plone">
<body>

<metal:main fill-slot="content-core">
<metal:content-core define-macro="content-core">

  <tal:edit condition="python: checkPermission('Modify portal content', context)">
    <a tal:attributes="href string:${context/absolute_url}/edit"
       i18n:domain="imio.smartweb"
       i18n:translate="">Edit section &darr;</a> /
    <a tal:attributes="href string:${context/absolute_url}/folder_contents"
       i18n:domain="imio.smartweb"
       i18n:translate="">Manage section contents &darr;</a>
  </tal:edit>

  <tal:if tal:define="items context/listFolderContents"
          tal:condition="items">

    <h2 tal:content="context/Title" />

    <span tal:repeat="item items">
        <div tal:define="item_has_image python:item.getIcon;
                         thumb_scale_list view/get_thumb_scale_list;
                         portal context/@@plone_portal_state/portal;
                         image_scale item/@@images;
                         img_class python:'thumb-%s' % thumb_scale_list;">
            <a tal:attributes="href item/absolute_url;
                               alt item/title">
                <img class="mime-icon"
                     tal:attributes="src python:view.get_mime_type_icon(item)">
            </a>
            <a tal:attributes="href item/absolute_url;alt item/title"
               tal:content="item/title">Item Title
            </a>
            <span class="discreet">&mdash; <span tal:replace="python:view.human_readable_size(item)" /></span>
            <p>
              <span tal:replace="item/description" />
            </p>
            <a tal:attributes="href item/absolute_url;"
               tal:condition="python: item_has_image and thumb_scale_list">
              <img tal:replace="structure python:image_scale.tag('image', scale=thumb_scale_list, css_class=img_class)" />
            </a>
        </div>
    </span>
  </tal:if>

</metal:content-core>
</metal:main>

</body>
</html>
