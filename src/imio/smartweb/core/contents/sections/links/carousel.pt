<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      lang="en"
      metal:use-macro="context/@@main_template/macros/master"
      i18n:domain="plone">
<body>

<metal:main fill-slot="content-core">
<metal:content-core define-macro="content-core">
<div tal:attributes="class string:section_links ${context/bootstrap_css_class}">
  <div class="header-section" tal:condition="python: checkPermission('Modify portal content', context)">
    <span i18n:domain="imio.smartweb" class="manage-section">
      <span class="icon-edit"></span>
      <a class="edit-section" tal:attributes="href string:${context/absolute_url}/edit"
         i18n:translate="">Edit section</a>
      <span class="icon-folderContents"></span>
      <a class="edit-section-content" tal:attributes="href string:${context/absolute_url}/folder_contents"
         i18n:translate="">Manage section contents</a>
      <span class="glyphicon-trash glyphicon"></span>
      <a tal:attributes="href string:${context/absolute_url}/delete_confirmation"
         i18n:translate="">Delete section</a>
      <span class="icon-plone-contentmenu-display"></span>
      <a tal:attributes="href string:${context/absolute_url}/select_default_view"
         i18n:translate="">Select view</a>
    </span>
    <tal:dates define="modified context/get_last_mofication_date">
    <span class="documentModified"
          tal:condition="modified">
      <span i18n:translate="box_last_modified">
        last modified
      </span>
      <span class="pat-moment" data-pat-moment="format:relative;"
            tal:content="modified">
        Modified
      </span>
    </span>
    </tal:dates>
  </div>

  <tal:if tal:define="items context/listFolderContents"
          tal:condition="items">
    <div class="content-section" tal:attributes="style view/background_style">
      <h2 tal:condition="not: context/hide_title"
          tal:content="context/title" />
      <div tal:attributes="id context/id" class="carousel carousel-dark slide" data-bs-ride="carousel">
        <div class="carousel-indicators">
          <button tal:repeat="item items"
                  tal:attributes="data-bs-target string:#${context/id};
                                  data-bs-slide-to repeat/item/index;
                                  aria-label string:Slide ${repeat/item/number};
                                  class python:'active' if repeat.item.start else nothing;
                                  aria-current python:'true' if repeat.item.start else nothing"
                  type="button">
          </button>
        </div>
        <div class="carousel-inner">
          <div class=""
               data-bs-interval="10000"
               tal:repeat="item items"
               tal:attributes="class python:'carousel-item active' if repeat.item.start else 'carousel-item'">
            <tal:def define="item_has_image python:item.getIcon;
                             thumb_scale context/image_scale;
                             portal context/@@plone_portal_state/portal;
                             image_scale item/@@images;
                             img_class python:'thumb-%s' % thumb_scale;">
            <a tal:attributes="href item/absolute_url;"
               tal:condition="python: item_has_image and thumb_scale">
              <img tal:replace="structure python:image_scale.tag('image', scale=thumb_scale, css_class='d-block w-100')">
            </a>
            <div class="carousel-caption d-none d-md-block">
              <h5 tal:content="item/title"></h5>
              <p tal:content="item/description"></p>
            </div>
          </tal:def>
          </div>
        </div>

        <button tal:attributes="data-bs-target string:#${context/id}"
                class="carousel-control-prev"
                type="button"
                data-bs-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Previous</span>
        </button>
        <button tal:attributes="data-bs-target string:#${context/id}"
                class="carousel-control-next"
                type="button"
                data-bs-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Next</span>
        </button>
      </div>
    </div>
  </tal:if>
</div>
</metal:content-core>
</metal:main>

</body>
</html>
